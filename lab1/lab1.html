<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Aaron Bauer" />
  <meta name="dcterms.date" content="2022-04-07" />
  <title>Lab 1: Data Lab</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #fffcf5;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {  background-color: #fffcf5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ef2929; background-color: #fffcf5; } /* Alert */
    code span.an { color: #8f5902; background-color: #fffcf5; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #c4a000; background-color: #fffcf5; } /* Attribute */
    code span.bn { color: #0000cf; background-color: #fffcf5; } /* BaseN */
    code span.cf { color: #006fe0; background-color: #fffcf5; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #d0372d; background-color: #fffcf5; } /* Char */
    code span.cn { color: #d0372d; background-color: #fffcf5; } /* Constant */
    code span.co { color: #8d8d84; background-color: #fffcf5; } /* Comment */
    code span.cv { color: #8d8d84; background-color: #fffcf5; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #8d8d84; background-color: #fffcf5; font-weight: bold; font-style: italic; } /* Documentation */
    code span.dt { color: #6434a3; background-color: #fffcf5; } /* DataType */
    code span.dv { color: #0000cf; background-color: #fffcf5; } /* DecVal */
    code span.er { color: #a40000; background-color: #fffcf5; font-weight: bold; } /* Error */
    code span.ex { background-color: #fffcf5; } /* Extension */
    code span.fl { color: #d0372d; background-color: #fffcf5; } /* Float */
    code span.fu { color: #006699; background-color: #fffcf5; } /* Function */
    code span.im { background-color: #fffcf5; } /* Import */
    code span.in { color: #8f5902; background-color: #fffcf5; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #0000ff; background-color: #fffcf5; font-weight: bold; } /* Keyword */
    code span.op { color: #006fe0; background-color: #fffcf5; font-weight: bold; } /* Operator */
    code span.ot { color: #8f5902; background-color: #fffcf5; } /* Other */
    code span.pp { color: #808080; background-color: #fffcf5; font-style: italic; } /* Preprocessor */
    code span.sc { color: #000000; background-color: #fffcf5; } /* SpecialChar */
    code span.ss { color: #4e9a06; background-color: #fffcf5; } /* SpecialString */
    code span.st { color: #008000; background-color: #fffcf5; } /* String */
    code span.va { color: #ba36a5; background-color: #fffcf5; } /* Variable */
    code span.vs { color: #4e9a06; background-color: #fffcf5; } /* VerbatimString */
    code span.wa { color: #8f5902; background-color: #fffcf5; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="lab-style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
  <link rel="manifest" href="./site.webmanifest">

</head>
<body>
<header id="title-block-header">
<h1 class="title">Lab 1: Data Lab</h1>
<p class="author">Aaron Bauer</p>
<p class="date">April 7, 2022</p>
</header>
<div class="wrapper">
<h1 id="lab-1-manipulating-bits1">Lab 1: Manipulating Bits<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></h1>
<ul>
<li><strong>Assigned:</strong> Monday, April 11</li>
<li><strong>Check-in Post:</strong> Before 9pm Friday, April 15 (<a href="https://moodle.carleton.edu/mod/forum/view.php?id=743568">check-in forum</a>)</li>
<li><strong>Due:</strong> 9pm Wednesday, April 20</li>
<li><strong>Collaboration:</strong> This is an individual assignment</li>
<li><strong>Handout:</strong>
<ul>
<li><a href="lab1-handout.tar">Linux starter project</a></li>
<li><a href="lab1-handout-mac.tar">MacOS starter project</a></li>
</ul></li>
<li><strong>Submit:</strong> Upload <code>bits.c</code> to <a href="https://moodle.carleton.edu/mod/assign/view.php?id=743558">Lab 1</a></li>
<li><strong>Reference:</strong>
<ul>
<li><a href="../notes/int-repr.html">Integer Representation</a></li>
<li><a href="../notes/int-arithmetic.html">Integer Arithmetic</a></li>
<li><a href="../notes/bitwise.html">Bitwise and Boolean operators</a> (especially the <a href="https://cs.carleton.edu/faculty/awb/cs208/s22/notes/bitwise.html#orgb17f0ab">practice problems</a>)</li>
</ul></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>The purpose of this assignment is to become more familiar with bit-level representations of integers and how to use bitwise operators. You’ll do this by solving a series of programming “puzzles.” Many of these puzzles are quite artificial, but you’ll find yourself thinking much more about bits in working your way through them.</p>
<h2 id="logistics">Logistics</h2>
<p><em>To test your solution for this lab on your own computer, you will need to have Perl installed.</em> Fortunately, Perl is included by default on both Linux and MacOS.</p>
You can get the files you need for this lab from the course web page <a href="http://cs.carleton.edu/faculty/awb/cs208/s22/handouts/lab1-handout.tar">here</a> or by running
<div class="sourceCode">
<pre class="sourcecode"><code>  wget http://cs.carleton.edu/faculty/awb/cs208/s22/handouts/lab1-handout.tar</code></pre>
</div>
<strong>If you are doing the lab on a Mac, use <a href="http://cs.carleton.edu/faculty/awb/cs208/s22/handouts/lab1-handout-mac.tar">this version</a> of the handout instead</strong>:
<div class="sourceCode">
<pre class="sourcecode"><code>  wget http://cs.carleton.edu/faculty/awb/cs208/s22/handouts/lab1-handout-mac.tar</code></pre>
</div>
An error message like
<div class="sourceCode">
<pre class="sourcecode"><code>  ./dlc: cannot execute binary file</code></pre>
</div>
means you have the wrong version of the handout. Extract the starter files with
<div class="sourceCode">
<pre class="sourcecode"><code>  tar xvf lab1-handout.tar</code></pre>
</div>
<p>This will cause a number of files to be unpacked in the directory. The only file you will be modifying and turning in is <code>bits.c</code>.</p>
The <code>bits.c</code> file contains a skeleton for each of the 8 programming puzzles. Your assignment is to complete each function skeleton using only <em>straightline</em> code for the integer puzzles (i.e., no loops or conditionals) and a limited number of C arithmetic and logical operators. Specifically, you are <em>only</em> allowed to use the following eight operators:
<div class="sourceCode">
<pre class="sourcecode"><code> ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></pre>
</div>
<p>A few of the functions further restrict this list. Also, you are not allowed to use any constants longer than 8 bits. See the comments in <code>bits.c</code> for detailed rules and a discussion of the desired coding style.</p>
<h2 id="the-puzzles">The Puzzles</h2>
<p>This section describes the puzzles that you will be solving in <code>bits.c</code>.</p>
<p>The table below lists the puzzles in rough order of difficulty from easiest to hardest. The <em>Rating</em> field gives number of points the puzzle is worth, and the <em>Max ops</em> field gives the maximum number of operators you are allowed to use to implement each function. See the comments in <code>bits.c</code> for more details on the desired behavior of the functions. You may also refer to the test functions in <code>tests.c</code>. These are used as reference functions to express the correct behavior of your functions, although they don’t satisfy the coding rules for your functions.</p>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>Rating</th>
<th>Max ops</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>sign(x)</code></td>
<td>Return 1 if <code>x</code> is positive, 0 if zero, and -1 if negative.</td>
<td>6</td>
<td>10</td>
</tr>
<tr class="even">
<td><code>getByte(x,n)</code></td>
<td>Extract byte <code>n</code> from <code>x</code>.</td>
<td>5</td>
<td>12</td>
</tr>
<tr class="odd">
<td><code>bitXor(x,y)</code></td>
<td><code>x ^ y</code> using only <code>|</code> and <code>~</code>.</td>
<td>5</td>
<td>14</td>
</tr>
<tr class="even">
<td><code>bitAnd(x,y)</code></td>
<td><code>x | y</code> using only <code>|</code> and <code>~</code>.</td>
<td>5</td>
<td>14</td>
</tr>
<tr class="odd">
<td><code>conditional(x,y,z)</code></td>
<td>Compute <code>if (x) { return y; } else { return z; }</code>.</td>
<td>5</td>
<td>12</td>
</tr>
<tr class="even">
<td><code>logicalNeg(x)</code></td>
<td>Compute <code>!x</code> without using <code>!</code> operator.</td>
<td>5</td>
<td>12</td>
</tr>
<tr class="odd">
<td><code>isLessOrEqual(x,y)</code></td>
<td>Return 1 if <code>x &lt;= y</code>, 0 otherwise</td>
<td>5</td>
<td>24</td>
</tr>
<tr class="even">
<td><code>absValue(x)</code></td>
<td>Return the absolute value of <code>x</code>.</td>
<td>2</td>
<td>10</td>
</tr>
<tr class="odd">
<td><code>isPower2(x)</code></td>
<td>Return 1 if <code>x</code> is a power of 2, 0 otherwise.</td>
<td>1</td>
<td>20</td>
</tr>
</tbody>
</table>
<h2 id="testing">Testing</h2>
We have included some autograding tools in the handout directory — <code>btest</code>, <code>dlc</code>, and <code>driver.pl</code> — to help you check the correctness of your work. As with Lab 0, you can run
<div class="sourceCode">
<pre class="sourcecode"><code>  make test</code></pre>
</div>
<p>to run the complete autograding of your work. Details on the specific autograding components are below.</p>
<h3 id="btest"><code>btest</code></h3>
This program checks the functional correctness of the functions in <code>bits.c</code>. To build and use it, type the following two commands:
<div class="sourceCode">
<pre class="sourcecode"><code>  make
  ./btest</code></pre>
</div>
<p>Notice that you must rebuild <code>btest</code> each time you modify your <code>bits.c</code> file.</p>
You’ll find it helpful to work through the functions one at a time, testing each one as you go. You can use the <code>-f</code> flag to instruct <code>btest</code> to test only a single function:
<div class="sourceCode">
<pre class="sourcecode"><code>  ./btest -f bitXor</code></pre>
</div>
You can feed it specific function arguments using the option flags <code>-1</code>, <code>-2</code>, and <code>-3</code>:
<div class="sourceCode">
<pre class="sourcecode"><code>  ./btest -f bitXor -1 4 -2 5</code></pre>
</div>
<p>Check the file <code>README</code> for documentation on running the <code>btest</code> program.</p>
<h3 id="dlc"><code>dlc</code></h3>
This is a modified version of an ANSI C compiler from the MIT CILK group that you can use to check for compliance with the coding rules for each puzzle. The typical usage is:
<div class="sourceCode">
<pre class="sourcecode"><code>  ./dlc bits.c</code></pre>
</div>
The program runs silently unless it detects a problem, such as an illegal operator, too many operators, or non-straightline code in the integer puzzles. Running with the <code>-e</code> switch:
<div class="sourceCode">
<pre class="sourcecode"><code>  ./dlc -e bits.c</code></pre>
</div>
<p>causes <code>dlc</code> to print counts of the number of operators used by each function. Type <code>./dlc -help</code> for a list of command line options.</p>
<h3 id="driver.pl"><code>driver.pl</code></h3>
This is a driver program that uses <code>btest</code> and <code>dlc</code> to compute the correctness and performance points for your solution. It takes no arguments:
<div class="sourceCode">
<pre class="sourcecode"><code>  perl driver.pl</code></pre>
</div>
<h2 id="implementation-advice">Implementation Advice</h2>
<ul>
<li><p>Don’t include the <code>&lt;stdio.h&gt;</code> header file in your <code>bits.c</code> file, as it confuses <code>dlc</code> and results in some non-intuitive error messages. You will still be able to use <code>printf</code>} in your <code>bits.c</code> file for debugging without including the <code>&lt;stdio.h&gt;</code> header, although <code>gcc</code> will print a warning that you can ignore.</p></li>
<li><p>The <code>dlc</code> program enforces a stricter and older form of C declarations than <code>gcc</code> enforces. In particular, any declaration must appear in a block (what you enclose in curly braces) before any statement that is not a declaration. For example, it will complain about the following code:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> foo(<span class="dt">int</span> x)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> a = x;</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  a *= <span class="dv">3</span>;     <span class="co">/* Statement that is not a declaration */</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> b = a;  <span class="co">/* ERROR: Declaration not allowed here */</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Instead, you must declare all your variables first, like this:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> foo(<span class="dt">int</span> x) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> a = x;</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> b;</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  a *= <span class="dv">3</span>;</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  b = a;</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> b+<span class="dv">2</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>The <code>dlc</code> checker does not accept the <code>0b</code> prefix for numbers in binary notation (e.g., <code>0b11110000</code>). Do not use it. Use decimal (e.g., <code>240</code>) or hexadecimal (<code>0xf0</code>) notation only. The included <code>ishow</code> tool lets you display integer representations and conversions. It takes hex or decimal input.</p>
<div class="sourceCode">
<pre class="sourcecode"><code>./ishow 0x27

Hex = 0x00000027, Signed = 39,    Unsigned = 39</code></pre>
</div></li>
</ul>
<h2 id="grading">Grading</h2>
<p>Your program will be evaluated out of 60 points using the following distribution.</p>
<ul>
<li>39 Correctness points.</li>
<li>18 Performance points.</li>
<li>3 Check-in post points.</li>
</ul>
<h3 id="correctness-points">Correctness points</h3>
<p>The puzzles you must solve have been given a rating of 1, 2, 5, or 6, such that their weighted sum totals to 39. We will evaluate your functions using the <code>btest</code> program, which is described in the next section. You will get full credit for a puzzle if it passes all of the tests performed by <code>btest</code>. Partial credit may be awarded for solutions that do not pass the tests.</p>
<h3 id="performance-points">Performance points</h3>
<p>Our main concern at this point in the course is that you can get the right answer. However, we want to instill in you a sense of keeping things as short and simple as you can. Furthermore, some of the puzzles can be solved by brute force, but we want you to be more clever. Thus, for each function we’ve established a maximum number of operators that you are allowed to use for each function. This limit is very generous and is designed only to catch egregiously inefficient solutions. You will receive 2 points for each <em>correct</em> function that satisfies the operator limit.</p>
<h2 id="the-beat-the-prof-contest">The “Beat the Prof” Contest</h2>
<p>For fun, I am offering an optional “Beat the Prof” contest that allows you to compete with other students and the nefarious Mr. Dr. The Professor to develop the most efficient puzzles. The goal is to solve each Data Lab puzzle using the fewest number of operators. See if you can match or beat Mr. Dr. The Professor’s operator count for each puzzle!</p>
To submit your entry to the contest, type:
<div class="sourceCode">
<pre class="sourcecode"><code>  ./driver.pl -u &quot;Your Nickname&quot;</code></pre>
</div>
Nicknames are limited to 35 characters and can contain alphanumerics, apostrophes, commas, periods, dashes, underscores, and ampersands. You can submit as often as you like. Your most recent submission will appear on a real-time scoreboard, identified only by your nickname. You can view the scoreboard by pointing your browser at
<div class="sourceCode">
<pre class="sourcecode"><code>  http://awb66333.mathcs.carleton.edu:8080</code></pre>
</div>
<p>You will need to be on campus or connected to the <a href="https://wiki.carleton.edu/display/itskb/GlobalProtect+VPN">Carleton VPN</a> to submit an entry and view the scoreboard.</p>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>This lab is adapted from the Data Lab developed for <em>Computer Systems: A Programmer’s Perspective</em> by <a href="http://www.cs.cmu.edu/~bryant">Randal E. Bryant</a> and <a href="http://www.cs.cmu.edu/~droh">David R. O’Hallaron</a>, Carnegie Mellon University, available <a href="http://csapp.cs.cmu.edu/3e/labs.html">here</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
